import{u as j}from"./user-C3PuLL1t.js";import{p as E,I as U,m as H,i as R,j as q,k as M,l as G,n as W,q as b,s as J,t as K,v as Q,x as X,a as o,y as Y,u as Z,d as v,r as ee,o as V,e as te,w as i,f as h,g as d,c as ae,z as oe,h as se}from"./index-B4C7dQAl.js";import{e as le,m as ne,f as re,g as ie,h as ue,j as de,k as ce,u as ve,l as me,n as pe,o as fe,p as ge,q as ye,r as ke,s as be,a as xe,t as w,b as _,V as S,c as B,v as Ce,i as m,d as Pe,A as Ve}from"./VTextField-DCEyhH4L.js";const he=le("v-alert-title"),we=["success","info","warning","error"],Se=E({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:U,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>we.includes(e)},...H(),...ne(),...R(),...re(),...ie(),...ue(),...de(),...q(),...M(),...ce({variant:"flat"})},"VAlert"),Be=G()({name:"VAlert",props:Se(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,p){let{emit:f,slots:t}=p;const l=W(e,"modelValue"),s=b(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),c=b(()=>({color:e.color??e.type,variant:e.variant})),{themeClasses:g}=J(e),{colorClasses:r,colorStyles:a,variantClasses:y}=ve(c),{densityClasses:n}=me(e),{dimensionStyles:I}=K(e),{elevationClasses:O}=pe(e),{locationStyles:T}=fe(e),{positionClasses:A}=ge(e),{roundedClasses:L}=ye(e),{textColorClasses:N,textColorStyles:D}=ke(Q(e,"borderColor")),{t:$}=X(),x=b(()=>({"aria-label":$(e.closeLabel),onClick(k){l.value=!1,f("click:close",k)}}));return()=>{const k=!!(t.prepend||s.value),z=!!(t.title||e.title),F=!!(t.close||e.closable);return l.value&&o(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},g.value,r.value,n.value,O.value,A.value,L.value,y.value,e.class],style:[a.value,I.value,T.value,e.style],role:"alert"},{default:()=>{var C,P;return[be(!1,"v-alert"),e.border&&o("div",{key:"border",class:["v-alert__border",N.value],style:D.value},null),k&&o("div",{key:"prepend",class:"v-alert__prepend"},[t.prepend?o(w,{key:"prepend-defaults",disabled:!s.value,defaults:{VIcon:{density:e.density,icon:s.value,size:e.prominent?44:28}}},t.prepend):o(xe,{key:"prepend-icon",density:e.density,icon:s.value,size:e.prominent?44:28},null)]),o("div",{class:"v-alert__content"},[z&&o(he,{key:"title"},{default:()=>{var u;return[((u=t.title)==null?void 0:u.call(t))??e.title]}}),((C=t.text)==null?void 0:C.call(t))??e.text,(P=t.default)==null?void 0:P.call(t)]),t.append&&o("div",{key:"append",class:"v-alert__append"},[t.append()]),F&&o("div",{key:"close",class:"v-alert__close"},[t.close?o(w,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var u;return[(u=t.close)==null?void 0:u.call(t,{props:x.value})]}}):o(_,Y({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},x.value),null)])]}})}}}),_e={class:"d-flex align-center justify-center",style:{"min-height":"100vh"}},Ie={class:"text-subtitle-1 text-medium-emphasis d-flex align-center justify-space-between"},Le={__name:"index",setup(e){const p=j(),f=Z(),t=v(!1),l=v(""),s=v(""),c=v("");async function g(){if(!l.value||!s.value){m.warn("Please enter a valid phone address!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});return}try{const a=(await Pe.post(Ve.LOGIN,{Phone:l.value,Password:s.value})).data;console.log("User logged in:",a),p.setUser(a),m.success("Login successful!",{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),setTimeout(()=>{f.push("/monitor")},2e3)}catch(r){r.response&&r.response.status===401?m.error("Invalid phone or password!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):m.error("An error occurred during login. Please try again.",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}}return(r,a)=>{const y=ee("router-link");return V(),te("div",_e,[o(B,{class:"mx-auto pa-12 pb-8",elevation:"8","max-width":"448",rounded:"lg"},{default:i(()=>[a[8]||(a[8]=h("div",{class:"text-subtitle-1 text-medium-emphasis"},"Phone",-1)),o(S,{density:"compact",placeholder:"Phone Number","prepend-inner-icon":"mdi-phone-outline",variant:"outlined",modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=n=>l.value=n)},null,8,["modelValue"]),h("div",Ie,[a[5]||(a[5]=d(" Password ")),o(y,{class:"text-caption text-decoration-none text-blue",to:"/forgotpassword"},{default:i(()=>a[4]||(a[4]=[d(" Forgot login password? ")])),_:1})]),o(S,{"append-inner-icon":t.value?"mdi-eye-off":"mdi-eye",type:t.value?"text":"password",density:"compact",placeholder:"Enter your password","prepend-inner-icon":"mdi-lock-outline",variant:"outlined",modelValue:s.value,"onUpdate:modelValue":a[1]||(a[1]=n=>s.value=n),"onClick:appendInner":a[2]||(a[2]=n=>t.value=!t.value)},null,8,["append-inner-icon","type","modelValue"]),o(B,{class:"mb-12",color:"surface-variant",variant:"tonal"},{default:i(()=>[o(Ce,{class:"text-medium-emphasis text-caption"},{default:i(()=>a[6]||(a[6]=[d(' Warning: After 3 consecutive failed login attempts, your account will be temporarily locked for three hours. If you must login now, you can also click "Forgot login password?" below to reset the login password. ')])),_:1})]),_:1}),o(_,{class:"mb-8",color:"blue",size:"large",variant:"tonal",block:"",onClick:a[3]||(a[3]=n=>g())},{default:i(()=>a[7]||(a[7]=[d(" Đăng nhập ")])),_:1}),c.value?(V(),ae(Be,{key:0,type:"error",outlined:""},{default:i(()=>[d(oe(c.value),1)]),_:1})):se("",!0)]),_:1})])}}};export{Le as default};
